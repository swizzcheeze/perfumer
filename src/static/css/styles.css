/* src/static/css/styles.css */

/* Reset and Base Styles */
html, body {
    height: 100%;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

*, *:before, *:after {
    box-sizing: inherit;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f8f9fa; /* Light mode default background */
    color: #212529; /* Light mode default text color */
    display: flex;
    flex-direction: column;
    min-height: 100vh; 
    transition: background-color 0.3s ease, color 0.3s ease;
}

/* App Container and Layout Structure */
#app, .app-container { 
    display: flex;
    flex-direction: column;
    flex-grow: 1;
    min-height: 0; 
}

/* --- APP HEADER --- */
.app-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 1.5rem;
    background-color: #FFFFFF; 
    border-bottom: 1px solid #dee2e6; 
    flex-shrink: 0; 
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    z-index: 100; 
    transition: background-color 0.3s ease, border-color 0.3s ease;
}
.header-left { display: flex; align-items: center; }
.header-left h1 {
    font-size: 1.5rem; margin-bottom: 0; font-weight: 600;
    color: #343a40; 
    transition: color 0.3s ease;
}
.header-right { display: flex; align-items: center; }

/* --- THEME TOGGLE BUTTON STYLES (shared light/dark) --- */
.theme-toggle-button {
    background: none;
    border: 1px solid transparent; 
    font-size: 1.25rem; 
    cursor: pointer;
    padding: 0.25rem 0.5rem;
    border-radius: 0.375rem;
    margin-left: 1rem; 
    transition: color 0.2s ease, background-color 0.2s ease;
}
.theme-toggle-button:focus {
    outline: none;
    box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25); /* Bootstrap-like focus */
}

/* Light mode appearance for toggle button */
.theme-toggle-button {
    color: #495057; 
}
.theme-toggle-button:hover {
    color: #0D6EFD; 
    background-color: rgba(0,0,0,0.05); 
}
/* --- THEME TOGGLE BUTTON STYLES END --- */

/* --- SUMMARY CARDS --- */
.summary-cards { display: flex; gap: 1rem; }
.summary-card {
    display: flex; align-items: center; background-color: #f8f9fa; 
    padding: 0.5rem 1rem; border-radius: 0.375rem; 
    font-size: 0.875rem; border: 1px solid #e9ecef;
    transition: background-color 0.3s ease, border-color 0.3s ease;
}
.summary-card i { font-size: 1.25rem; color: #0D6EFD; }
.summary-card strong { color: #212529; transition: color 0.3s ease; }

/* --- APP BODY & SIDEBARS --- */
.app-body { display: flex; flex-direction: row; flex-grow: 1; overflow: hidden; width: 100%; min-height: 0; }
.left-sidebar, .right-sidebar {
    width: 280px; padding: 1.5rem; background-color: #FFFFFF; 
    overflow-y: auto; flex-shrink: 0; box-shadow: 1px 0 3px rgba(0,0,0,0.04);
    transition: background-color 0.3s ease, border-color 0.3s ease;
}
.left-sidebar { border-right: 1px solid #dee2e6; }
.right-sidebar { border-left: 1px solid #dee2e6; }
.sidebar-panel {
    background-color: #f8f9fa; padding: 1rem; border-radius: 0.375rem;
    border: 1px solid #e9ecef; margin-bottom: 1rem; 
    transition: background-color 0.3s ease, border-color 0.3s ease;
}
.sidebar-panel:last-child { margin-bottom: 0; }
.sidebar-panel h5 { font-weight: 600; color: #495057; margin-top: 0; transition: color 0.3s ease; }

/* --- MAIN CONTENT --- */
.main-content {
    flex-grow: 1; padding: 1.5rem; overflow-y: auto; 
    background-color: #f0f2f5; 
    transition: background-color 0.3s ease;
}
.main-content-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; flex-wrap: wrap; gap: 1rem; }
.main-content-header h2 { margin-bottom: 0; font-weight: 600; color: #343a40; transition: color 0.3s ease;}
.filters-toolbar { display: flex; align-items: center; gap: 0.5rem; }

/* --- PAGINATION STYLES START --- */
.pagination .page-item .page-link {
    border-radius: 0.25rem; 
    margin: 0 3px; 
    color: #0D6EFD; 
    border: 1px solid #dee2e6; 
    transition: all 0.2s ease-in-out; 
}
.pagination .page-item.active .page-link {
    background-color: #0D6EFD; border-color: #0D6EFD; color: white;
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.1); 
}
.pagination .page-item.disabled .page-link {
    color: #6c757d; background-color: #e9ecef; border-color: #dee2e6;
}
.pagination .page-item .page-link:hover {
    background-color: #e0e0e0; 
    border-color: #adb5bd;
    color: #0a58ca; 
}
.pagination .page-item.active .page-link:hover {
    background-color: #0b5ed7; border-color: #0a58ca;
}
/* --- PAGINATION STYLES END --- */

/* --- TABLE STYLES --- */
.table-responsive { /* Bootstrap default */ }
.resizable-table {
    width: 100%; table-layout: fixed; background-color: #FFFFFF; 
    border-radius: 0.375rem; border: 1px solid #dee2e6; 
    border-collapse: separate; border-spacing: 0; /* Use separate for individual cell borders if not using Bootstrap's default table-bordered behavior */
    transition: background-color 0.3s ease, border-color 0.3s ease;
}
.resizable-table th, .resizable-table td {
    padding: 0.75rem; vertical-align: middle; font-size: 0.9rem;
    /* If using border-collapse: collapse, then use this: */
    /* border: 1px solid #dee2e6;  */
    /* If using border-collapse: separate (as above), borders are on table, and cells can have their own or rely on Bootstrap's table-bordered if used */
    border-bottom: 1px solid #dee2e6; /* Common for rows */
    transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
}
.resizable-table td {
     border-top: 1px solid #e9ecef; /* From original user CSS */
}
.resizable-table th {
    position: relative; text-overflow: ellipsis; white-space: nowrap;
    background-color: #f8f9fa; border-bottom-width: 2px; /* Keep this for header distinctness */
    border-bottom-color: #dee2e6; /* Explicitly set */
    font-weight: 600; color: #495057;
}
/* Example for cell borders if table-bordered class is on <table> in HTML */
/* .table-bordered th, .table-bordered td { border: 1px solid #dee2e6; } */
/* .table-bordered thead th, .table-bordered thead td { border-bottom-width: 2px; } */

.sticky-thead th {
    position: sticky; top: -1px; z-index: 10; 
    background-color: #f8f9fa; /* Match table header */
    transition: background-color 0.3s ease;
}
.resizable-table th.resizable { cursor: col-resize; }
.resizable-table th.resizable::after { content: ''; position: absolute; right: 0; top: 0; bottom: 0; width: 5px; cursor: col-resize; }
.resizable-table th.resizing { cursor: col-resize; user-select: none; }
.actions-column { width: 130px; text-align: center; }
.category-tag {
    display: inline-block; padding: 0.3em 0.75em; font-size: 0.75em; font-weight: 500;
    line-height: 1; text-align: center; white-space: nowrap; vertical-align: baseline;
    border-radius: 50rem; background-color: #6c757d; color: #FFFFFF;
    margin-right: 0.3rem; margin-bottom: 0.3rem;
    transition: background-color 0.3s ease, color 0.3s ease;
}
.category-tag.citrus { background-color: #ffc107; color: #000; }
.category-tag.floral { background-color: #fd7e14; color: #fff; }

/* --- OTHER UI ELEMENTS --- */
.ai-response {
    white-space: pre-wrap; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6; padding: 1rem; background-color: #e9ecef; 
    border-radius: 0.25rem; max-height: 500px; overflow-y: auto; border: 1px solid #ced4da;
    transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
}
textarea.form-control { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
.form-label { font-size: 0.875rem; font-weight: 500; color: #495057; transition: color 0.3s ease;}
.fab-ai {
    position: fixed; bottom: 2rem; right: 2rem; width: 56px; height: 56px;
    background-color: #0D6EFD; color: white; border: none; border-radius: 50%;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2); font-size: 1.75rem; 
    display: flex; align-items: center; justify-content: center; cursor: pointer;
    z-index: 1050; transition: background-color 0.2s ease-in-out, transform 0.2s ease-in-out;
}
.fab-ai:hover { background-color: #0b5ed7; transform: scale(1.05); }
.fab-ai:active { transform: scale(0.95); }
.notes-cell {
    display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;
    overflow: hidden; text-overflow: ellipsis; max-height: 3.2em; 
    line-height: 1.6em; cursor: default; 
}

/* Responsive adjustments (condensed) */
@media (max-width: 992px) { .left-sidebar, .right-sidebar { width: 240px; } .header-left h1 { font-size: 1.25rem; } .summary-card { padding: 0.4rem 0.8rem; font-size: 0.8rem; } .summary-card i { font-size: 1.1rem; } }
@media (max-width: 768px) { #app, .app-container { overflow-y: auto; } .app-body { flex-direction: column; overflow-y: visible; height: auto; } .left-sidebar, .right-sidebar, .main-content { width: 100%; height: auto; overflow-y: visible; flex-shrink: 0; } .left-sidebar, .right-sidebar { border-right: none; border-left: none; border-bottom: 1px solid #dee2e6; box-shadow: none; } .main-content-header { flex-direction: column; align-items: flex-start; } .filters-toolbar { width: 100%; flex-wrap: wrap; } .filters-toolbar .input-group, .filters-toolbar .form-select { width: 100%; margin-bottom: 0.5rem; } .summary-cards { display: none; } .fab-ai { bottom: 1rem; right: 1rem; width: 48px; height: 48px; font-size: 1.5rem; } }

/* --- USER-TOGGLED DARK MODE STYLES START --- */
/* These rules are now GLOBAL and apply when body has class 'dark-mode' */
body.dark-mode {
    background-color: #212529;
    color: #f0f0f0; 
}
body.dark-mode .app-header { background-color: #2c3034; border-color: #373b3e; }
body.dark-mode .header-left h1 { color: #f8f9fa; }
body.dark-mode .theme-toggle-button { color: #adb5bd; }
body.dark-mode .theme-toggle-button:hover { color: #4dabf7; background-color: #3a3f44; }
body.dark-mode .summary-card { background-color: #343a40; border-color: #495057; }
body.dark-mode .summary-card strong { color: #f8f9fa; }
body.dark-mode .summary-card i { color: #4dabf7; }
body.dark-mode .left-sidebar, body.dark-mode .right-sidebar { background-color: #2c3034; border-color: #373b3e; }
body.dark-mode .sidebar-panel { background-color: #343a40; border-color: #495057; }
body.dark-mode .sidebar-panel h5, body.dark-mode .form-label { color: #adb5bd; }
body.dark-mode .main-content { background-color: #1c1e21; }
body.dark-mode .main-content-header h2 { color: #f8f9fa; }
body.dark-mode .table { color: #f0f0f0; } /* Base table text color */
body.dark-mode .resizable-table { background-color: #2c3034; border-color: #454d55; }
body.dark-mode .resizable-table th, body.dark-mode .resizable-table td { border-color: #454d55; } /* Cell borders */
body.dark-mode .resizable-table td { border-top-color: #454d55; } /* Ensure TD top border matches */
body.dark-mode .resizable-table th { background-color: #343a40; color: #f8f9fa; border-bottom-color: #454d55; }
body.dark-mode .sticky-thead th { background-color: #343a40; }
body.dark-mode .table-striped tbody tr:nth-of-type(odd) { background-color: rgba(255, 255, 255, 0.03); } /* Subtler striping */
body.dark-mode .table-hover tbody tr:hover { background-color: #3a3f44; }
body.dark-mode .table-info { background-color: #0a58ca !important; color: white !important; } /* Dark mode edit highlight */
body.dark-mode .ai-response { background-color: #343a40; color: #f8f9fa; border-color: #495057; }
body.dark-mode .form-control, body.dark-mode .form-select { background-color: #2c3034; color: #f8f9fa; border-color: #495057; }
body.dark-mode .form-control:focus, body.dark-mode .form-select:focus { border-color: #4dabf7; box-shadow: 0 0 0 0.2rem rgba(77, 171, 247, 0.25); }
body.dark-mode .form-control::placeholder { color: #6c757d; }
body.dark-mode .input-group-text { background-color: #343a40; border-color: #495057; color: #adb5bd; }
body.dark-mode .btn-outline-secondary { color: #adb5bd; border-color: #495057; }
body.dark-mode .btn-outline-secondary:hover { background-color: #495057; color: #f8f9fa; }
body.dark-mode .category-tag { background-color: #495057; color: #f8f9fa; }
body.dark-mode .unit-value { color: #adb5bd; }
/* Dark Mode Pagination Styles */
body.dark-mode .pagination .page-item .page-link { background-color: #343a40; color: #adb5bd; border-color: #495057; }
body.dark-mode .pagination .page-item.active .page-link { background-color: #0D6EFD; border-color: #0D6EFD; color: white; }
body.dark-mode .pagination .page-item.disabled .page-link { color: #495057; background-color: #2c3034; border-color: #495057; }
body.dark-mode .pagination .page-item .page-link:hover { background-color: #495057; border-color: #545b62; color: #dee2e6; }
body.dark-mode .pagination .page-item.active .page-link:hover { background-color: #0b5ed7; border-color: #0a58ca; }
/* --- USER-TOGGLED DARK MODE STYLES END --- */

/* This media query can be used for OS-level defaults if no JS toggle preference is set,
   but the JS provided already handles checking OS preference for the initial theme.
   So, this block might be redundant or used for very specific OS-only overrides if needed. */
/*
@media (prefers-color-scheme: dark) {
    body:not(.dark-mode) { 
        // Example: If no user toggle has set .dark-mode, but OS is dark, apply some base styles.
        // background-color: #121212; 
        // color: #e0e0e0;
    }
}
*/